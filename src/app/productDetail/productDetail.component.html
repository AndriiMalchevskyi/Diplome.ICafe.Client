<div class="container mt-3">
  <div class="row justify-content-center border border-info bg-light">
    <div *ngIf="canBeUpdated(); then CanUpdatePage else SimplePage"></div>
  </div>
  
<ng-template #CanUpdatePage>
  <div *ngIf="!havePhoto || isCreatedForm; then Default else Custom"></div>
  <ng-template #Default>
    <div class=" col-sm-5">
      <img class="img-thumbnail" src="../../../assets/notFound.jpg"/>
      <div class="custom-file mb-3">
        <input type="file" class="custom-file-input" id="customFile" name="filename" ng2FileSelect [uploader]="uploader" multiple>
        <label class="custom-file-label" for="customFile">Choose file</label>
      </div>
    </div>
  </ng-template>
  <ng-template #Custom>
    <div class=" col-sm-5">
      <img class="img-thumbnail" src="{{product.photoUrl}}"/>
      <div class="custom-file mb-3">
        <input type="file" class="custom-file-input" id="customFile" name="filename" ng2FileSelect [uploader]="uploader" multiple>
        <label class="custom-file-label" for="customFile">Choose file</label>
      </div>
    </div>
  </ng-template>
  
  <div class="col-sm-7">
    <h3>Product info</h3>
    <form (ngSubmit)="Save()">
      <div *ngIf="!isCreatedForm" class="form-group row">
        <label for="id" class="col-sm-2 col-form-label">ID:</label>
        <div class="col-sm-10">
          <input type="text" readonly class="form-control-plaintext" id="id" name="id" [(ngModel)]="product.id" >
        </div>
      </div>
      <div class="form-group row">
        <label for="title" class="col-sm-2 col-form-label">Title:</label>
        <div class="col-sm-10">
          <input type="text" class="form-control-plaintext" id="title" name="title" [(ngModel)]="product.title">
        </div>
      </div>
      <div class="form-group row">
        <label for="description" class="col-sm-2 col-form-label">Description:</label>
        <div class="col-sm-10">
          <textarea type="text" rows="5" class="form-control-plaintext" id="description" name="description" [(ngModel)]="product.description"></textarea>
        </div>
      </div>
      <div class="form-group row">
        <label for="category" class="col-sm-2 col-form-label">Category:</label>
        <div class="col-sm-10">
          <input type="text" class="form-control-plaintext" id="category" name="category" [(ngModel)]="product.category">
        </div>
      </div>
      <div class="form-group row">
        <label for="price" class="col-sm-2 col-form-label">Price:</label>
        <div class="col-sm-10">
          <input type="number" class="form-control-plaintext" id="price" name="price" [(ngModel)]="product.price">
        </div>
      </div>
      <div *ngIf="!isCreatedForm">
        <input type="button" class="btn btn-primary" type="submit" value="Save">
        <a class="col text-right" ><input (click)="AddToCart(product.id)" type="button" class="btn btn-success" value="Buy"></a>
        <a class="col text-right" ><input (click)="Delete(product.id)" type="button" class="btn btn-danger" value="Delete"></a>
      </div>

      <div *ngIf="isCreatedForm">
        <input type="button" class="btn btn-primary" type="submit" value="Save">
      </div>
    </form>
  </div>
</ng-template>

<ng-template #SimplePage>
  <div *ngIf="!havePhoto || isCreatedForm; then Default else Custom"></div>
  <ng-template #Default>
    <div class=" col-sm-5">
      <img class="img-thumbnail" src="../../../assets/notFound.jpg"/>
    </div>
  </ng-template>
  <ng-template #Custom>
    <div class=" col-sm-5">
      <img class="img-thumbnail" src="{{product.photoUrl}}"/>
    </div>
  </ng-template>
  
  <div class="col-sm-7">
    <h3 class="text-center">Product info</h3>
    <form>
      <div class="form-group row">
        <label for="title" class="col-sm-2 col-form-label">Title:</label>
        <div class="col-sm-10">
          <input type="text" readonly class="form-control-plaintext" id="title" name="title" [(ngModel)]="product.title">
        </div>
      </div>
      <div class="form-group row">
        <label for="description" class="col-sm-2 col-form-label">Description:</label>
        <div class="col-sm-10">
          <textarea type="text" readonly rows="6" class="form-control-plaintext" id="description" name="description" [(ngModel)]="product.description"></textarea>
        </div>
      </div>
      <div class="form-group row">
        <label for="category" class="col-sm-2 col-form-label">Category:</label>
        <div class="col-sm-10">
          <input type="text" readonly class="form-control-plaintext" id="category" name="category" [(ngModel)]="product.category">
        </div>
      </div>
      <div class="form-group row">
        <label for="price" class="col-sm-2 col-form-label">Price:</label>
        <div class="col-sm-10">
          <input type="number"  readonly class="form-control-plaintext" id="price" name="price" [(ngModel)]="product.price">
        </div>
      </div>
      <div class="form-group row">
        <button (click)="AddToCart(product.id)" type="button" class="btn btn-success m-auto"><h3>Buy now</h3></button>
      </div>
    </form>
  </div>
</ng-template>

</div>